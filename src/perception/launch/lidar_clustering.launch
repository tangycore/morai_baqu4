<launch>
  <!-- LiDAR Clustering Node for MORAI Simulator -->
  
  <arg name="lidar_topic"           default="/front_lidar/velodyne_points"/>
  <arg name="output_frame"          default="base_link"/>
  <arg name="cluster_result_topic"  default="cluster_result"/>
  
  <!-- Clustering parameters -->
  <arg name="cluster_tolerance"     default="0.6"/>      <!-- 차량 간 간격 -->
  <arg name="min_cluster_size"      default="30"/>       <!-- 먼 거리 차량도 감지 -->
  <arg name="max_cluster_size"      default="5000"/>
  
  <!-- Filtering parameters (base_link 기준) -->
  <arg name="max_distance"          default="60.0"/>     <!-- 60m까지 -->
  <arg name="min_x"                 default="4.0"/>     <!-- 후방 5m (후측방 감지) -->
  <arg name="max_z"                 default="5.0"/>      <!-- 지면 위 3.5m (트럭 포함) -->
  <arg name="min_z"                 default="0.0"/>     <!-- 지면 약간 아래 -->
  <arg name="min_y"                 default="-5.0"/>    <!-- 우측 50m -->
  <arg name="max_y"                 default="5.0"/>     <!-- 좌측 50m -->

  <node pkg="lidar_clustering" type="lidar_clustering_node" name="lidar_cluster_node" output="screen">
    <param name="lidar_topic"           value="$(arg lidar_topic)"/>
    <param name="output_frame"          value="$(arg output_frame)"/>
    <param name="cluster_result_topic"  value="$(arg cluster_result_topic)"/>
    
    <param name="cluster_tolerance"     value="$(arg cluster_tolerance)"/>
    <param name="min_cluster_size"      value="$(arg min_cluster_size)"/>
    <param name="max_cluster_size"      value="$(arg max_cluster_size)"/>
    
    <param name="max_distance"          value="$(arg max_distance)"/>
    <param name="min_x"                 value="$(arg min_x)"/>
    <param name="max_z"                 value="$(arg max_z)"/>
    <param name="min_z"                 value="$(arg min_z)"/>
    <param name="max_y"                 value="$(arg max_y)"/>
    <param name="min_y"                 value="$(arg min_y)"/>   
  </node>

</launch>